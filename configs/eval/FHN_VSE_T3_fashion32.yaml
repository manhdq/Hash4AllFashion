data_param:
  phase: test
  batch_size: 2 # batch size, most ideal is 64
  data_root: /home/dungmaster/Datasets/Fashion-Outfits-Theme-Aware # data root
  image_root: /home/dungmaster/Datasets/Fashion-Outfits-Theme-Aware  # image root
  data_set: train # data set
  nega_mode: RandomOnline # negative outfits strategy
  num_workers: 2 # number of workers
  use_lmdb: true # use lmbd data
  use_semantic: false # use sentance data
  use_visual: true # use visual data
  use_outfit_semantic: false # whether to use outfit semantic
  use_visual_embedding: false  # whether to use visual embedding
  transforms: true
  cate_selection: [top, bottom, outerwear, bag, footwear] # [full-body, top, bottom, outerwear, bag, footwear, accessory]
  num_pairwise: [2, 3, 4]
  using_max_num_pairwise: true

fitb_data_param:
  phase: "test"
  num_cand: 4
  data_root: /home/dungmaster/Datasets/Fashion-Outfits-Theme-Aware # data root
  image_root: /home/dungmaster/Datasets/Fashion-Outfits-Theme-Aware  # image root
  data_set: train # data set  
  num_workers: 2 # number of workers
  use_lmdb: true # use lmbd data
  use_semantic: false # use sentance data
  use_visual: true # use visual data
  use_outfit_semantic: false # whether to use outfit semantic
  cate_selection: [top, bottom, outerwear, bag, footwear] # [full-body, top, bottom, outerwear, bag, footwear, accessory]

net_param:
  name: FashionNet
  num_users: 1 # number of users ##TODO: Later
  dim: 128 # dimension of binary codes
  outfit_semantic_dim: 512 # dimension of outfit semantic vector
  visual_embedding_dim: 512 # dimension of image embedding vector  
  backbone: alexnet # backbone for feature extractor
  hash_types: 2 # type of hash codes, current only use for item
  scale_tanh: true # use scale tanh
  use_semantic: false # use semantic features
  use_visual: true # user visdual features
  use_outfit_semantic: false # whether to use outfit semantic
  use_visual_embedding: false  # whether to use visual embedding
  margin: 0.1 # margin for vse-loss, if exists
  shared_weight_network: true
  pairwise_weight: 1.0
  outfit_semantic_weight: 1.5
  # load_trained: /home/dungmaster/Projects/Machine Learning/HangerAI_outfits_recommendation_system/Hash4AllFashion_deploy/checkpoints/old/H4A_t3_allFashion_noSemantic_classify_best.net # manhdq
  load_trained: /home/dungmaster/Projects/Machine Learning/HangerAI_outfits_recommendation_system/Hash4AllFashion_deploy/checkpoints/12_10_23/fhn_t3_ve_12_10_best.pt

solver_param:
  name: "FashionNetSolver"
  display: 100 # display interval
  test_display: 100  # display test interval
  epochs: 2 # total epoches
  gamma: 1.0 # gamma for scale-tanh
  gpus: [0]
  ##TODO: using tensorboard
  tracking_method: "tensorboard"
  tracking_log_dir: "./logs/fashion_hash_net_t3_allFashion_outfitSemantic"
  ##TODO: Delete this visdom option
  visdom_env: fashion_hash_net
  visdom_title: fashion_hash_net_t3_allFashion_outfitSemantic
  checkpoints: ./checkpoints/fashion_hash_net_t3_allFashion_outfitSemantic
  optim_param:
    name: SGD
    # lr: [5, 0.001, 0.005, 0.005, 0.01] # learning rate for each group
    # lr: [10, 0.001, 0.01, 0.01, 0.1] # features, user_encoder, encoder_v, encoder_t, matching_weight
    # lr: [10, 0.01, 0.1]
    # lr: [0.01, 0.001, 0.001, 0.01] # features, encoder_v, classifier_v, core
    lr:
      features: 0.01
      encoder_v: 0.001
      # encoder_o: 0.001      
      classifier_v: 0.001
      core: 0.01
    weight_decay:
      features: 1.0e-05
      encoder_v: 1.0e-05
      # encoder_o: 1.0e-05      
      classifier_v: 1.0e-05
      core: 1.0e-05
    grad_param: { momentum: 0.9 } # setting for SGD
    lr_scheduler: ReduceLROnPlateau
    scheduler_param:
      { cooldown: 10, factor: 0.5, patience: 10, threshold: 0.05 }

log_file: logs/train/fashion_hash_net_t3_outfitFashion_outfitSemantic.log
log_level: DEBUG